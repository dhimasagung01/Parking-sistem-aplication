<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parking Management System</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <aside class="sidebar">
      <div class="brand">
        <i class="bx bxs-car-garage"></i>
        <div>
          Kelompok 7
          <span>Parking Management System</span>
        </div>
      </div>

      <ul class="nav-links">
        <li>
          <a href="/" class="{{ 'active' if request.path == '/' else '' }}">
            <i class="bx bxs-dashboard"></i> Dashboard
          </a>
        </li>
        <li>
          <a
            href="/masuk"
            class="{{ 'active' if request.path == '/masuk' else '' }}"
          >
            <i class="bx bx-log-in-circle"></i> Kendaraan Masuk
          </a>
        </li>
        <li>
          <a
            href="/keluar"
            class="{{ 'active' if request.path == '/keluar' else '' }}"
          >
            <i class="bx bx-log-out-circle"></i> Kendaraan Keluar
          </a>
        </li>
        <li>
          <a
            href="/member"
            class="{{ 'active' if request.path == '/member' else '' }}"
          >
            <i class="bx bxs-user-detail"></i> Kelola Member
          </a>
        </li>
        <li>
          <a
            href="/riwayat"
            class="{{ 'active' if request.path == '/riwayat' else '' }}"
          >
            <i class="bx bx-history"></i> Riwayat Transaksi
          </a>
        </li>
      </ul>

      <div class="tarif-info">
        <h4 sy>Tarif Parkir</h4>
        <div class="tarif-item">Motor: <span>Rp 3.000/jam</span></div>
        <div class="tarif-item">Mobil: <span>Rp 5.000/jam</span></div>
        <div class="tarif-item">Member: <span>Rp 5.000/24jam</span></div>
      </div>
    </aside>

    <main class="main-content">{% block content %} {% endblock %}</main>
  </body>
  <script>
document.addEventListener("DOMContentLoaded", function() {
    var x, i, j, l, ll, selElmnt, a, b, c;
    
    // Cari elemen custom wrapper
    x = document.getElementsByClassName("custom-select-wrapper");
    l = x.length;
    
    // Ambil elemen select asli
    selElmnt = document.getElementById("realSelect");
    ll = selElmnt.length;
    
    // Ambil div yang bertindak sebagai tombol/display terpilih
    a = x[0].querySelector(".select-selected");
    
    // Ambil container untuk opsi list
    b = x[0].querySelector(".select-items");

    // Loop semua opsi di select asli untuk dipindahkan ke custom div
    for (j = 1; j < ll; j++) {
        c = document.createElement("DIV");
        c.innerHTML = selElmnt.options[j].innerHTML;
        
        // Ketika item custom diklik
        c.addEventListener("click", function(e) {
            var y, i, k, s, h, sl, yl;
            s = document.getElementById("realSelect"); // Select asli
            sl = s.length;
            h = this.parentNode.previousElementSibling; // Header custom (display)
            
            for (i = 0; i < sl; i++) {
                if (s.options[i].innerHTML == this.innerHTML) {
                    s.selectedIndex = i; // Update select asli
                    h.innerHTML = this.innerHTML; // Update tampilan
                    
                    // Atur class 'same-as-selected' (warna cyan)
                    y = this.parentNode.getElementsByClassName("same-as-selected");
                    yl = y.length;
                    for (k = 0; k < yl; k++) {
                        y[k].removeAttribute("class");
                    }
                    this.setAttribute("class", "same-as-selected");
                    break;
                }
            }
            h.click(); // Tutup dropdown
        });
        b.appendChild(c);
    }

    // Event listener saat tombol utama diklik (Buka/Tutup)
    a.addEventListener("click", function(e) {
        e.stopPropagation();
        closeAllSelect(this);
        this.nextElementSibling.classList.toggle("select-hide");
        this.classList.toggle("select-arrow-active");
    });

    // Fungsi menutup dropdown jika klik di luar
    function closeAllSelect(elmnt) {
        var x, y, i, xl, yl, arrNo = [];
        x = document.getElementsByClassName("select-items");
        y = document.getElementsByClassName("select-selected");
        xl = x.length;
        yl = y.length;
        for (i = 0; i < yl; i++) {
            if (elmnt == y[i]) {
                arrNo.push(i)
            } else {
                y[i].classList.remove("select-arrow-active");
            }
        }
        for (i = 0; i < xl; i++) {
            if (arrNo.indexOf(i)) {
                x[i].classList.add("select-hide");
            }
        }
    }
    
    // Jika user klik sembarang tempat, tutup dropdown
    document.addEventListener("click", closeAllSelect);
});
</script>
</html>
